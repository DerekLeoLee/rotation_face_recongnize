# 项目简介
人口老龄化问题一直是困扰人们生活的社会热点问题，其中又有一群更为特殊的人群——孤寡老人。他们已然迈入应当享受天伦之乐的年龄，但因为家庭等特殊因素不得不独立留在家中，在这过程中造成老人身心上的问题，是每个家庭和整个社会都应当正视的。借助最近快速发展的人工智能技术，实时的信号采集与信息处理可以帮助改善社会弱势缺乏陪伴的困境。
	本作品从系统周围实时采集视音频和激光雷达信号，经优化后的轻型神经网络模型实现实时算法处理后，指导机器人实现社会弱势群体的陪伴交互功能。本系统主要具有跟随陪伴和指导交互两大功能，跟随陪伴功能是指通过收集周边的视频和激光雷达信息，定位陪伴对象位置后，通过控制机器人运动实现室内外的目标对象跟随。指导交互功能是指系统通过搜集周围的音频和激光雷达信号，实现主动告知目标对象前方障碍，被动语音互动交流以及陪伴对象语音控制机器人运动的功能。
	本作品智能陪伴系统将以Turtlebot2作为实验载体，高速摄像头、麦克风阵列、Kinect景深相机和激光雷达作为数组采集模块。首先信息采集端通过USB3.0摄像头实时读取视频图像，进行简单的预处理发送给web服务器。在服务器端通过YOLO目标检测算法进行畸变目标检测，将识别到目标后送入CNN网络模型进行人脸角度分类，之后把人脸角度和距离位置等信息返还给移动实验平台端。同时信息采集端通过激光雷达和Kinect深度相机收集周边的景深信息，通过SLAM构建的室内地图，实现避障和室内定位，并结合服务器返回的对象信息实现对目标对象的跟随。根据检测服务器实时返回的数据，可以实现对目标对象运动轨迹的预测，结合建立的室内地图，提醒目标对周围障碍物的躲避。通过麦克风检测人声，实现语音交流和语音控制。实现目标检测、跟踪，以及语音交互的功能。


## 项目概览
```
├─learn_code                # 训练模型的相关代码
│  ├─cascades              # opencv人脸检测的模型
│  ├─conf_hub           
│  ├─examples
│  ├─model_out             # pytorch训练生成的模型
│  ├─temp_code
│  ├─video_hub             # 训练素材集散地
│  ├─cv2_Face_Recognize.py # opencv的人脸识别
│  ├─darknet.py            # yolo的python封装
│  ├─ekf_filter.py         # 卡尔曼滤波算法
│  ├─model.py              # pytorch的模型
│  ├─prepare_data.py       # 处理pytrch的训练素材
│  ├─prepare_yolo.py       # 训练yolo的脚本
│  ├─torch_angle_classify.py    # 角度检测的算法
│  ├─train.py              # 训练pytorch
├─ros                       # 机器人的相关代码
│  ├─my_fly_turtle.py      # 机器人运动
│  ├─my_watch_turtle.py    # 机器人捕获数据
├─yolo_bin                  # yolo的运行环境
│  ├─backup                # yolo训练生成的模型
│  ├─my_data               # yolo训练所需的素材
│  └─Yolo_mark             # yolo打标用的软件
├─app.py                    # Ai算法的服务器
├─ip_camera.py              # 通过RTSP协议读摄像头
├─local_config.py           # 本地环境的配置文件
├─service_test.py           # 服务器测试代码
```
	目标检测
过去技术	Haar特征+Adaboost+Cascade级联算法
过去不足	时间复杂度高、窗口冗余；手工设计特征，鲁棒性低
我们技术	基于深度学习的回归算法：YOLO的目标检测
技术优势	高精度，高实时性，容错率更高
表1-3  识别方面比较
	目标识别
过去技术	角度要求高
过去不足	只能实现正脸识别，在有一定角度时无法准确识别
我们技术	基于CNN的角度识别
技术优势	采用渐进式识别技术，能够通过目标对象的侧面图像，获取与它正面的夹角，在转向正脸的同时不断更新角度与判断方向正误，以保证正确性
表1-4  定位方面比较
	目标定位
过去技术	过于依靠GPS
过去不足	室内定位精度极低
我们技术	Kinect相机，SLAM建模
技术优势	基于深度相机的室内地图建模，提高定位精度
表1-5  跟踪方面比较
	目标跟踪
过去技术	主要靠人工跟踪
过去不足	人工成本过大。而且风险很大，全靠专业人员的知识，人力成本在现在已经是不可忽视的一项重要支出
我们技术	Ros操作系统，自动驾驶，渐进式技术
技术优势	国际主流的开源机器人操作系统没有后面的安全隐患，使项目更具有可移植性。采用边识别边跟踪的技术，完全确保目标对象跟踪正确

框架主要可以分为三个部分，工控机、信息收集模组、Turtlebot2移动平台和Web上位机服务器。陪伴交互机器人是基于陪伴和交互的目的而研发的，首先陪伴就要求机器人能够识别老人，并且实时的跟随他，这就需要有一个高分辨率的摄像头对老人的面部进行准确的提取，之后通过Web协议传到上位机中进行实时面部特征比对和老人状态信息判断，如果特征比对结果正确，老人的状态信息和特征比对信息就会传回给机器人控制中心——工控机中，工控机根据接收到的信息规划路径，驱动机器人不断向老人靠近，从而实现陪伴的功能。
其次交互功能，麦克风阵列负责采集目标对象的语音信息，同样通过Web协议传到上位机中进行处理，这个处理包括对语音进行接收、语音转文字、语义分析、对话逻辑处理、语音合成，最后传回麦克风阵列中，并且通过扬声器播放出来。
在这整个过程中，用到的硬件设备之间的关系图如图3-1所示， 我们整个系统的这三个部分通过Web服务器上位机相连接。具体的硬件介绍将在下面的章节中进行详细说明。

